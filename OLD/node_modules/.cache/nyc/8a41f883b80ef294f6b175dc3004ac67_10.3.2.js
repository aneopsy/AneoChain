var cov_1wp9o5tx4q=function(){var path='/home/aneopsy/AneoChain/src/httpServer/index.js',hash='bf2428253ccae0bffc2f16c9e52c7511b5241acc',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/home/aneopsy/AneoChain/src/httpServer/index.js',statementMap:{'0':{start:{line:1,column:16},end:{line:1,column:34}},'1':{start:{line:2,column:19},end:{line:2,column:41}},'2':{start:{line:3,column:18},end:{line:3,column:47}},'3':{start:{line:4,column:10},end:{line:4,column:26}},'4':{start:{line:5,column:24},end:{line:5,column:49}},'5':{start:{line:6,column:14},end:{line:6,column:44}},'6':{start:{line:7,column:20},end:{line:7,column:56}},'7':{start:{line:8,column:34},end:{line:8,column:84}},'8':{start:{line:9,column:28},end:{line:9,column:72}},'9':{start:{line:10,column:18},end:{line:10,column:40}},'10':{start:{line:11,column:22},end:{line:11,column:54}},'11':{start:{line:12,column:19},end:{line:12,column:48}},'12':{start:{line:16,column:8},end:{line:16,column:29}},'13':{start:{line:18,column:30},end:{line:25,column:9}},'14':{start:{line:19,column:12},end:{line:24,column:14}},'15':{start:{line:22,column:20},end:{line:22,column:45}},'16':{start:{line:27,column:8},end:{line:27,column:40}},'17':{start:{line:29,column:8},end:{line:29,column:85}},'18':{start:{line:31,column:8},end:{line:33,column:11}},'19':{start:{line:32,column:12},end:{line:32,column:60}},'20':{start:{line:35,column:8},end:{line:40,column:11}},'21':{start:{line:36,column:28},end:{line:36,column:53}},'22':{start:{line:37,column:12},end:{line:37,column:84}},'23':{start:{line:37,column:35},end:{line:37,column:84}},'24':{start:{line:39,column:12},end:{line:39,column:44}},'25':{start:{line:42,column:8},end:{line:49,column:11}},'26':{start:{line:43,column:31},end:{line:43,column:55}},'27':{start:{line:44,column:25},end:{line:44,column:62}},'28':{start:{line:46,column:12},end:{line:48,column:67}},'29':{start:{line:46,column:32},end:{line:46,column:92}},'30':{start:{line:47,column:17},end:{line:48,column:67}},'31':{start:{line:47,column:29},end:{line:47,column:64}},'32':{start:{line:48,column:17},end:{line:48,column:67}},'33':{start:{line:51,column:8},end:{line:56,column:11}},'34':{start:{line:52,column:29},end:{line:52,column:71}},'35':{start:{line:53,column:12},end:{line:53,column:111}},'36':{start:{line:53,column:36},end:{line:53,column:111}},'37':{start:{line:55,column:12},end:{line:55,column:45}},'38':{start:{line:58,column:8},end:{line:63,column:11}},'39':{start:{line:59,column:29},end:{line:59,column:73}},'40':{start:{line:60,column:12},end:{line:60,column:113}},'41':{start:{line:60,column:36},end:{line:60,column:113}},'42':{start:{line:62,column:12},end:{line:62,column:45}},'43':{start:{line:65,column:8},end:{line:70,column:11}},'44':{start:{line:66,column:39},end:{line:66,column:100}},'45':{start:{line:67,column:12},end:{line:67,column:139}},'46':{start:{line:67,column:46},end:{line:67,column:139}},'47':{start:{line:69,column:12},end:{line:69,column:55}},'48':{start:{line:72,column:8},end:{line:74,column:11}},'49':{start:{line:73,column:12},end:{line:73,column:66}},'50':{start:{line:76,column:8},end:{line:89,column:11}},'51':{start:{line:77,column:37},end:{line:77,column:67}},'52':{start:{line:78,column:35},end:{line:78,column:87}},'53':{start:{line:80,column:12},end:{line:80,column:124}},'54':{start:{line:80,column:42},end:{line:80,column:124}},'55':{start:{line:82,column:12},end:{line:88,column:13}},'56':{start:{line:83,column:37},end:{line:83,column:82}},'57':{start:{line:84,column:16},end:{line:84,column:53}},'58':{start:{line:86,column:16},end:{line:87,column:30}},'59':{start:{line:86,column:61},end:{line:86,column:122}},'60':{start:{line:87,column:21},end:{line:87,column:30}},'61':{start:{line:91,column:8},end:{line:93,column:11}},'62':{start:{line:92,column:12},end:{line:92,column:97}},'63':{start:{line:95,column:8},end:{line:101,column:11}},'64':{start:{line:96,column:26},end:{line:96,column:47}},'65':{start:{line:98,column:35},end:{line:98,column:64}},'66':{start:{line:100,column:12},end:{line:100,column:51}},'67':{start:{line:103,column:8},end:{line:112,column:11}},'68':{start:{line:104,column:27},end:{line:104,column:44}},'69':{start:{line:105,column:12},end:{line:105,column:123}},'70':{start:{line:105,column:55},end:{line:105,column:123}},'71':{start:{line:107,column:28},end:{line:107,column:71}},'72':{start:{line:109,column:34},end:{line:109,column:58}},'73':{start:{line:111,column:12},end:{line:111,column:50}},'74':{start:{line:114,column:8},end:{line:121,column:11}},'75':{start:{line:115,column:30},end:{line:115,column:73}},'76':{start:{line:116,column:12},end:{line:116,column:115}},'77':{start:{line:116,column:37},end:{line:116,column:115}},'78':{start:{line:118,column:34},end:{line:118,column:60}},'79':{start:{line:120,column:12},end:{line:120,column:50}},'80':{start:{line:123,column:8},end:{line:143,column:11}},'81':{start:{line:124,column:27},end:{line:124,column:46}},'82':{start:{line:125,column:27},end:{line:125,column:47}},'83':{start:{line:127,column:12},end:{line:127,column:93}},'84':{start:{line:127,column:34},end:{line:127,column:93}},'85':{start:{line:128,column:31},end:{line:128,column:56}},'86':{start:{line:130,column:12},end:{line:142,column:13}},'87':{start:{line:131,column:16},end:{line:131,column:145}},'88':{start:{line:131,column:75},end:{line:131,column:145}},'89':{start:{line:133,column:37},end:{line:133,column:156}},'90':{start:{line:135,column:16},end:{line:135,column:39}},'91':{start:{line:137,column:41},end:{line:137,column:104}},'92':{start:{line:138,column:16},end:{line:138,column:57}},'93':{start:{line:140,column:16},end:{line:141,column:30}},'94':{start:{line:140,column:92},end:{line:140,column:143}},'95':{start:{line:141,column:21},end:{line:141,column:30}},'96':{start:{line:145,column:8},end:{line:154,column:11}},'97':{start:{line:146,column:27},end:{line:146,column:46}},'98':{start:{line:147,column:12},end:{line:153,column:13}},'99':{start:{line:148,column:32},end:{line:148,column:72}},'100':{start:{line:149,column:16},end:{line:149,column:48}},'101':{start:{line:151,column:16},end:{line:152,column:30}},'102':{start:{line:151,column:49},end:{line:151,column:100}},'103':{start:{line:152,column:21},end:{line:152,column:30}},'104':{start:{line:156,column:8},end:{line:172,column:11}},'105':{start:{line:157,column:27},end:{line:157,column:46}},'106':{start:{line:158,column:27},end:{line:158,column:47}},'107':{start:{line:160,column:12},end:{line:160,column:93}},'108':{start:{line:160,column:34},end:{line:160,column:93}},'109':{start:{line:161,column:31},end:{line:161,column:56}},'110':{start:{line:163,column:12},end:{line:171,column:13}},'111':{start:{line:164,column:16},end:{line:164,column:145}},'112':{start:{line:164,column:75},end:{line:164,column:145}},'113':{start:{line:166,column:33},end:{line:166,column:76}},'114':{start:{line:167,column:16},end:{line:167,column:62}},'115':{start:{line:169,column:16},end:{line:170,column:30}},'116':{start:{line:169,column:49},end:{line:169,column:100}},'117':{start:{line:170,column:21},end:{line:170,column:30}},'118':{start:{line:174,column:8},end:{line:185,column:11}},'119':{start:{line:175,column:27},end:{line:175,column:46}},'120':{start:{line:176,column:28},end:{line:176,column:48}},'121':{start:{line:178,column:12},end:{line:184,column:13}},'122':{start:{line:179,column:30},end:{line:179,column:86}},'123':{start:{line:180,column:16},end:{line:180,column:59}},'124':{start:{line:182,column:16},end:{line:183,column:30}},'125':{start:{line:182,column:49},end:{line:182,column:115}},'126':{start:{line:183,column:21},end:{line:183,column:30}},'127':{start:{line:187,column:8},end:{line:189,column:11}},'128':{start:{line:188,column:12},end:{line:188,column:45}},'129':{start:{line:191,column:8},end:{line:194,column:11}},'130':{start:{line:192,column:26},end:{line:192,column:54}},'131':{start:{line:193,column:12},end:{line:193,column:42}},'132':{start:{line:196,column:8},end:{line:201,column:11}},'133':{start:{line:197,column:12},end:{line:200,column:19}},'134':{start:{line:199,column:20},end:{line:199,column:75}},'135':{start:{line:203,column:8},end:{line:214,column:11}},'136':{start:{line:204,column:12},end:{line:213,column:19}},'137':{start:{line:206,column:20},end:{line:206,column:56}},'138':{start:{line:207,column:20},end:{line:207,column:50}},'139':{start:{line:208,column:20},end:{line:208,column:51}},'140':{start:{line:211,column:20},end:{line:212,column:34}},'141':{start:{line:211,column:99},end:{line:211,column:192}},'142':{start:{line:212,column:25},end:{line:212,column:34}},'143':{start:{line:216,column:8},end:{line:220,column:11}},'144':{start:{line:217,column:12},end:{line:218,column:33}},'145':{start:{line:217,column:42},end:{line:217,column:65}},'146':{start:{line:218,column:17},end:{line:218,column:33}},'147':{start:{line:219,column:12},end:{line:219,column:81}},'148':{start:{line:224,column:8},end:{line:230,column:11}},'149':{start:{line:225,column:12},end:{line:229,column:15}},'150':{start:{line:226,column:16},end:{line:226,column:37}},'151':{start:{line:226,column:25},end:{line:226,column:37}},'152':{start:{line:227,column:16},end:{line:227,column:180}},'153':{start:{line:228,column:16},end:{line:228,column:30}},'154':{start:{line:234,column:0},end:{line:234,column:28}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:15,column:4},end:{line:15,column:5}},loc:{start:{line:15,column:51},end:{line:221,column:5}},line:15},'1':{name:'(anonymous_1)',decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:42},end:{line:25,column:9}},line:18},'2':{name:'(anonymous_2)',decl:{start:{line:21,column:33},end:{line:21,column:34}},loc:{start:{line:21,column:46},end:{line:23,column:17}},line:21},'3':{name:'(anonymous_3)',decl:{start:{line:31,column:43},end:{line:31,column:44}},loc:{start:{line:31,column:57},end:{line:33,column:9}},line:31},'4':{name:'(anonymous_4)',decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:64},end:{line:40,column:9}},line:35},'5':{name:'(anonymous_5)',decl:{start:{line:42,column:50},end:{line:42,column:51}},loc:{start:{line:42,column:64},end:{line:49,column:9}},line:42},'6':{name:'(anonymous_6)',decl:{start:{line:51,column:66},end:{line:51,column:67}},loc:{start:{line:51,column:80},end:{line:56,column:9}},line:51},'7':{name:'(anonymous_7)',decl:{start:{line:58,column:50},end:{line:58,column:51}},loc:{start:{line:58,column:64},end:{line:63,column:9}},line:58},'8':{name:'(anonymous_8)',decl:{start:{line:65,column:88},end:{line:65,column:89}},loc:{start:{line:65,column:102},end:{line:70,column:9}},line:65},'9':{name:'(anonymous_9)',decl:{start:{line:72,column:49},end:{line:72,column:50}},loc:{start:{line:72,column:63},end:{line:74,column:9}},line:72},'10':{name:'(anonymous_10)',decl:{start:{line:76,column:50},end:{line:76,column:51}},loc:{start:{line:76,column:64},end:{line:89,column:9}},line:76},'11':{name:'(anonymous_11)',decl:{start:{line:91,column:57},end:{line:91,column:58}},loc:{start:{line:91,column:71},end:{line:93,column:9}},line:91},'12':{name:'(anonymous_12)',decl:{start:{line:95,column:42},end:{line:95,column:43}},loc:{start:{line:95,column:56},end:{line:101,column:9}},line:95},'13':{name:'(anonymous_13)',decl:{start:{line:103,column:43},end:{line:103,column:44}},loc:{start:{line:103,column:57},end:{line:112,column:9}},line:103},'14':{name:'(anonymous_14)',decl:{start:{line:114,column:52},end:{line:114,column:53}},loc:{start:{line:114,column:66},end:{line:121,column:9}},line:114},'15':{name:'(anonymous_15)',decl:{start:{line:123,column:66},end:{line:123,column:67}},loc:{start:{line:123,column:80},end:{line:143,column:9}},line:123},'16':{name:'(anonymous_16)',decl:{start:{line:145,column:62},end:{line:145,column:63}},loc:{start:{line:145,column:76},end:{line:154,column:9}},line:145},'17':{name:'(anonymous_17)',decl:{start:{line:156,column:63},end:{line:156,column:64}},loc:{start:{line:156,column:77},end:{line:172,column:9}},line:156},'18':{name:'(anonymous_18)',decl:{start:{line:174,column:81},end:{line:174,column:82}},loc:{start:{line:174,column:95},end:{line:185,column:9}},line:174},'19':{name:'(anonymous_19)',decl:{start:{line:187,column:36},end:{line:187,column:37}},loc:{start:{line:187,column:50},end:{line:189,column:9}},line:187},'20':{name:'(anonymous_20)',decl:{start:{line:191,column:37},end:{line:191,column:38}},loc:{start:{line:191,column:51},end:{line:194,column:9}},line:191},'21':{name:'(anonymous_21)',decl:{start:{line:196,column:89},end:{line:196,column:90}},loc:{start:{line:196,column:103},end:{line:201,column:9}},line:196},'22':{name:'(anonymous_22)',decl:{start:{line:198,column:22},end:{line:198,column:23}},loc:{start:{line:198,column:41},end:{line:200,column:17}},line:198},'23':{name:'(anonymous_23)',decl:{start:{line:203,column:37},end:{line:203,column:38}},loc:{start:{line:203,column:57},end:{line:214,column:9}},line:203},'24':{name:'(anonymous_24)',decl:{start:{line:205,column:22},end:{line:205,column:23}},loc:{start:{line:205,column:36},end:{line:209,column:17}},line:205},'25':{name:'(anonymous_25)',decl:{start:{line:210,column:23},end:{line:210,column:24}},loc:{start:{line:210,column:31},end:{line:213,column:17}},line:210},'26':{name:'(anonymous_26)',decl:{start:{line:216,column:21},end:{line:216,column:22}},loc:{start:{line:216,column:52},end:{line:220,column:9}},line:216},'27':{name:'(anonymous_27)',decl:{start:{line:223,column:4},end:{line:223,column:5}},loc:{start:{line:223,column:23},end:{line:231,column:5}},line:223},'28':{name:'(anonymous_28)',decl:{start:{line:224,column:27},end:{line:224,column:28}},loc:{start:{line:224,column:48},end:{line:230,column:9}},line:224},'29':{name:'(anonymous_29)',decl:{start:{line:225,column:54},end:{line:225,column:55}},loc:{start:{line:225,column:63},end:{line:229,column:13}},line:225}},branchMap:{'0':{loc:{start:{line:37,column:12},end:{line:37,column:84}},type:'if',locations:[{start:{line:37,column:12},end:{line:37,column:84}},{start:{line:37,column:12},end:{line:37,column:84}}],line:37},'1':{loc:{start:{line:46,column:12},end:{line:48,column:67}},type:'if',locations:[{start:{line:46,column:12},end:{line:48,column:67}},{start:{line:46,column:12},end:{line:48,column:67}}],line:46},'2':{loc:{start:{line:47,column:17},end:{line:48,column:67}},type:'if',locations:[{start:{line:47,column:17},end:{line:48,column:67}},{start:{line:47,column:17},end:{line:48,column:67}}],line:47},'3':{loc:{start:{line:53,column:12},end:{line:53,column:111}},type:'if',locations:[{start:{line:53,column:12},end:{line:53,column:111}},{start:{line:53,column:12},end:{line:53,column:111}}],line:53},'4':{loc:{start:{line:60,column:12},end:{line:60,column:113}},type:'if',locations:[{start:{line:60,column:12},end:{line:60,column:113}},{start:{line:60,column:12},end:{line:60,column:113}}],line:60},'5':{loc:{start:{line:67,column:12},end:{line:67,column:139}},type:'if',locations:[{start:{line:67,column:12},end:{line:67,column:139}},{start:{line:67,column:12},end:{line:67,column:139}}],line:67},'6':{loc:{start:{line:80,column:12},end:{line:80,column:124}},type:'if',locations:[{start:{line:80,column:12},end:{line:80,column:124}},{start:{line:80,column:12},end:{line:80,column:124}}],line:80},'7':{loc:{start:{line:86,column:16},end:{line:87,column:30}},type:'if',locations:[{start:{line:86,column:16},end:{line:87,column:30}},{start:{line:86,column:16},end:{line:87,column:30}}],line:86},'8':{loc:{start:{line:105,column:12},end:{line:105,column:123}},type:'if',locations:[{start:{line:105,column:12},end:{line:105,column:123}},{start:{line:105,column:12},end:{line:105,column:123}}],line:105},'9':{loc:{start:{line:116,column:12},end:{line:116,column:115}},type:'if',locations:[{start:{line:116,column:12},end:{line:116,column:115}},{start:{line:116,column:12},end:{line:116,column:115}}],line:116},'10':{loc:{start:{line:127,column:12},end:{line:127,column:93}},type:'if',locations:[{start:{line:127,column:12},end:{line:127,column:93}},{start:{line:127,column:12},end:{line:127,column:93}}],line:127},'11':{loc:{start:{line:131,column:16},end:{line:131,column:145}},type:'if',locations:[{start:{line:131,column:16},end:{line:131,column:145}},{start:{line:131,column:16},end:{line:131,column:145}}],line:131},'12':{loc:{start:{line:140,column:16},end:{line:141,column:30}},type:'if',locations:[{start:{line:140,column:16},end:{line:141,column:30}},{start:{line:140,column:16},end:{line:141,column:30}}],line:140},'13':{loc:{start:{line:140,column:20},end:{line:140,column:90}},type:'binary-expr',locations:[{start:{line:140,column:20},end:{line:140,column:47}},{start:{line:140,column:51},end:{line:140,column:90}}],line:140},'14':{loc:{start:{line:151,column:16},end:{line:152,column:30}},type:'if',locations:[{start:{line:151,column:16},end:{line:152,column:30}},{start:{line:151,column:16},end:{line:152,column:30}}],line:151},'15':{loc:{start:{line:160,column:12},end:{line:160,column:93}},type:'if',locations:[{start:{line:160,column:12},end:{line:160,column:93}},{start:{line:160,column:12},end:{line:160,column:93}}],line:160},'16':{loc:{start:{line:164,column:16},end:{line:164,column:145}},type:'if',locations:[{start:{line:164,column:16},end:{line:164,column:145}},{start:{line:164,column:16},end:{line:164,column:145}}],line:164},'17':{loc:{start:{line:169,column:16},end:{line:170,column:30}},type:'if',locations:[{start:{line:169,column:16},end:{line:170,column:30}},{start:{line:169,column:16},end:{line:170,column:30}}],line:169},'18':{loc:{start:{line:182,column:16},end:{line:183,column:30}},type:'if',locations:[{start:{line:182,column:16},end:{line:183,column:30}},{start:{line:182,column:16},end:{line:183,column:30}}],line:182},'19':{loc:{start:{line:211,column:20},end:{line:212,column:34}},type:'if',locations:[{start:{line:211,column:20},end:{line:212,column:34}},{start:{line:211,column:20},end:{line:212,column:34}}],line:211},'20':{loc:{start:{line:211,column:24},end:{line:211,column:97}},type:'binary-expr',locations:[{start:{line:211,column:24},end:{line:211,column:57}},{start:{line:211,column:61},end:{line:211,column:97}}],line:211},'21':{loc:{start:{line:217,column:12},end:{line:218,column:33}},type:'if',locations:[{start:{line:217,column:12},end:{line:218,column:33}},{start:{line:217,column:12},end:{line:218,column:33}}],line:217},'22':{loc:{start:{line:219,column:36},end:{line:219,column:78}},type:'cond-expr',locations:[{start:{line:219,column:48},end:{line:219,column:73}},{start:{line:219,column:76},end:{line:219,column:78}}],line:219},'23':{loc:{start:{line:226,column:16},end:{line:226,column:37}},type:'if',locations:[{start:{line:226,column:16},end:{line:226,column:37}},{start:{line:226,column:16},end:{line:226,column:37}}],line:226}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0,'70':0,'71':0,'72':0,'73':0,'74':0,'75':0,'76':0,'77':0,'78':0,'79':0,'80':0,'81':0,'82':0,'83':0,'84':0,'85':0,'86':0,'87':0,'88':0,'89':0,'90':0,'91':0,'92':0,'93':0,'94':0,'95':0,'96':0,'97':0,'98':0,'99':0,'100':0,'101':0,'102':0,'103':0,'104':0,'105':0,'106':0,'107':0,'108':0,'109':0,'110':0,'111':0,'112':0,'113':0,'114':0,'115':0,'116':0,'117':0,'118':0,'119':0,'120':0,'121':0,'122':0,'123':0,'124':0,'125':0,'126':0,'127':0,'128':0,'129':0,'130':0,'131':0,'132':0,'133':0,'134':0,'135':0,'136':0,'137':0,'138':0,'139':0,'140':0,'141':0,'142':0,'143':0,'144':0,'145':0,'146':0,'147':0,'148':0,'149':0,'150':0,'151':0,'152':0,'153':0,'154':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0],'10':[0,0],'11':[0,0],'12':[0,0],'13':[0,0],'14':[0,0],'15':[0,0],'16':[0,0],'17':[0,0],'18':[0,0],'19':[0,0],'20':[0,0],'21':[0,0],'22':[0,0],'23':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const express=(++cov_1wp9o5tx4q.s[0],require('express'));const bodyParser=(++cov_1wp9o5tx4q.s[1],require('body-parser'));const swaggerUi=(++cov_1wp9o5tx4q.s[2],require('swagger-ui-express'));const R=(++cov_1wp9o5tx4q.s[3],require('ramda'));const swaggerDocument=(++cov_1wp9o5tx4q.s[4],require('./swagger.json'));const Block=(++cov_1wp9o5tx4q.s[5],require('../blockchain/block'));const Transaction=(++cov_1wp9o5tx4q.s[6],require('../blockchain/transaction'));const TransactionAssertionError=(++cov_1wp9o5tx4q.s[7],require('../blockchain/transactionAssertionError'));const BlockAssertionError=(++cov_1wp9o5tx4q.s[8],require('../blockchain/blockAssertionError'));const HTTPError=(++cov_1wp9o5tx4q.s[9],require('./httpError'));const ArgumentError=(++cov_1wp9o5tx4q.s[10],require('../util/argumentError'));const CryptoUtil=(++cov_1wp9o5tx4q.s[11],require('../util/cryptoUtil'));class HttpServer{constructor(node,blockchain,operator,miner){++cov_1wp9o5tx4q.f[0];++cov_1wp9o5tx4q.s[12];this.app=express();++cov_1wp9o5tx4q.s[13];const projectWallet=wallet=>{++cov_1wp9o5tx4q.f[1];++cov_1wp9o5tx4q.s[14];return{id:wallet.id,addresses:R.map(keyPair=>{++cov_1wp9o5tx4q.f[2];++cov_1wp9o5tx4q.s[15];return keyPair.publicKey;},wallet.keyPairs)};};++cov_1wp9o5tx4q.s[16];this.app.use(bodyParser.json());++cov_1wp9o5tx4q.s[17];this.app.use('/api-docs',swaggerUi.serve,swaggerUi.setup(swaggerDocument));++cov_1wp9o5tx4q.s[18];this.app.get('/blockchain/blocks',(req,res)=>{++cov_1wp9o5tx4q.f[3];++cov_1wp9o5tx4q.s[19];res.status(200).send(blockchain.getAllBlocks());});++cov_1wp9o5tx4q.s[20];this.app.get('/blockchain/blocks/latest',(req,res)=>{++cov_1wp9o5tx4q.f[4];let lastBlock=(++cov_1wp9o5tx4q.s[21],blockchain.getLastBlock());++cov_1wp9o5tx4q.s[22];if(lastBlock==null){++cov_1wp9o5tx4q.b[0][0];++cov_1wp9o5tx4q.s[23];throw new HTTPError(404,'Last block not found');}else{++cov_1wp9o5tx4q.b[0][1];}++cov_1wp9o5tx4q.s[24];res.status(200).send(lastBlock);});++cov_1wp9o5tx4q.s[25];this.app.put('/blockchain/blocks/latest',(req,res)=>{++cov_1wp9o5tx4q.f[5];let requestBlock=(++cov_1wp9o5tx4q.s[26],Block.fromJson(req.body));let result=(++cov_1wp9o5tx4q.s[27],node.checkReceivedBlock(requestBlock));++cov_1wp9o5tx4q.s[28];if(result==null){++cov_1wp9o5tx4q.b[1][0];++cov_1wp9o5tx4q.s[29];res.status(200).send('Requesting the blockchain to check.');}else{++cov_1wp9o5tx4q.b[1][1];++cov_1wp9o5tx4q.s[30];if(result){++cov_1wp9o5tx4q.b[2][0];++cov_1wp9o5tx4q.s[31];res.status(200).send(requestBlock);}else{++cov_1wp9o5tx4q.b[2][1];++cov_1wp9o5tx4q.s[32];throw new HTTPError(409,'Blockchain is update.');}}});++cov_1wp9o5tx4q.s[33];this.app.get('/blockchain/blocks/:hash([a-zA-Z0-9]{64})',(req,res)=>{++cov_1wp9o5tx4q.f[6];let blockFound=(++cov_1wp9o5tx4q.s[34],blockchain.getBlockByHash(req.params.hash));++cov_1wp9o5tx4q.s[35];if(blockFound==null){++cov_1wp9o5tx4q.b[3][0];++cov_1wp9o5tx4q.s[36];throw new HTTPError(404,`Block not found with hash '${req.params.hash}'`);}else{++cov_1wp9o5tx4q.b[3][1];}++cov_1wp9o5tx4q.s[37];res.status(200).send(blockFound);});++cov_1wp9o5tx4q.s[38];this.app.get('/blockchain/blocks/:index',(req,res)=>{++cov_1wp9o5tx4q.f[7];let blockFound=(++cov_1wp9o5tx4q.s[39],blockchain.getBlockByIndex(req.params.index));++cov_1wp9o5tx4q.s[40];if(blockFound==null){++cov_1wp9o5tx4q.b[4][0];++cov_1wp9o5tx4q.s[41];throw new HTTPError(404,`Block not found with index '${req.params.index}'`);}else{++cov_1wp9o5tx4q.b[4][1];}++cov_1wp9o5tx4q.s[42];res.status(200).send(blockFound);});++cov_1wp9o5tx4q.s[43];this.app.get('/blockchain/blocks/transactions/:transactionId([a-zA-Z0-9]{64})',(req,res)=>{++cov_1wp9o5tx4q.f[8];let transactionFromBlock=(++cov_1wp9o5tx4q.s[44],blockchain.getTransactionFromBlocks(req.params.transactionId));++cov_1wp9o5tx4q.s[45];if(transactionFromBlock==null){++cov_1wp9o5tx4q.b[5][0];++cov_1wp9o5tx4q.s[46];throw new HTTPError(404,`Transaction '${req.params.transactionId}' not found in any block`);}else{++cov_1wp9o5tx4q.b[5][1];}++cov_1wp9o5tx4q.s[47];res.status(200).send(transactionFromBlock);});++cov_1wp9o5tx4q.s[48];this.app.get('/blockchain/transactions',(req,res)=>{++cov_1wp9o5tx4q.f[9];++cov_1wp9o5tx4q.s[49];res.status(200).send(blockchain.getAllTransactions());});++cov_1wp9o5tx4q.s[50];this.app.post('/blockchain/transactions',(req,res)=>{++cov_1wp9o5tx4q.f[10];let requestTransaction=(++cov_1wp9o5tx4q.s[51],Transaction.fromJson(req.body));let transactionFound=(++cov_1wp9o5tx4q.s[52],blockchain.getTransactionById(requestTransaction.id));++cov_1wp9o5tx4q.s[53];if(transactionFound!=null){++cov_1wp9o5tx4q.b[6][0];++cov_1wp9o5tx4q.s[54];throw new HTTPError(409,`Transaction '${requestTransaction.id}' already exists`);}else{++cov_1wp9o5tx4q.b[6][1];}++cov_1wp9o5tx4q.s[55];try{let newTransaction=(++cov_1wp9o5tx4q.s[56],blockchain.addTransaction(requestTransaction));++cov_1wp9o5tx4q.s[57];res.status(201).send(newTransaction);}catch(ex){++cov_1wp9o5tx4q.s[58];if(ex instanceof TransactionAssertionError){++cov_1wp9o5tx4q.b[7][0];++cov_1wp9o5tx4q.s[59];throw new HTTPError(400,ex.message,requestTransaction,ex);}else{++cov_1wp9o5tx4q.b[7][1];++cov_1wp9o5tx4q.s[60];throw ex;}}});++cov_1wp9o5tx4q.s[61];this.app.get('/blockchain/transactions/unspent',(req,res)=>{++cov_1wp9o5tx4q.f[11];++cov_1wp9o5tx4q.s[62];res.status(200).send(blockchain.getUnspentTransactionsForAddress(req.query.address));});++cov_1wp9o5tx4q.s[63];this.app.get('/operator/wallets',(req,res)=>{++cov_1wp9o5tx4q.f[12];let wallets=(++cov_1wp9o5tx4q.s[64],operator.getWallets());let projectedWallets=(++cov_1wp9o5tx4q.s[65],R.map(projectWallet,wallets));++cov_1wp9o5tx4q.s[66];res.status(200).send(projectedWallets);});++cov_1wp9o5tx4q.s[67];this.app.post('/operator/wallets',(req,res)=>{++cov_1wp9o5tx4q.f[13];let password=(++cov_1wp9o5tx4q.s[68],req.body.password);++cov_1wp9o5tx4q.s[69];if(R.match(/\w+/g,password).length<=4){++cov_1wp9o5tx4q.b[8][0];++cov_1wp9o5tx4q.s[70];throw new HTTPError(400,'Password must contain more than 4 words');}else{++cov_1wp9o5tx4q.b[8][1];}let newWallet=(++cov_1wp9o5tx4q.s[71],operator.createWalletFromPassword(password));let projectedWallet=(++cov_1wp9o5tx4q.s[72],projectWallet(newWallet));++cov_1wp9o5tx4q.s[73];res.status(201).send(projectedWallet);});++cov_1wp9o5tx4q.s[74];this.app.get('/operator/wallets/:walletId',(req,res)=>{++cov_1wp9o5tx4q.f[14];let walletFound=(++cov_1wp9o5tx4q.s[75],operator.getWalletById(req.params.walletId));++cov_1wp9o5tx4q.s[76];if(walletFound==null){++cov_1wp9o5tx4q.b[9][0];++cov_1wp9o5tx4q.s[77];throw new HTTPError(404,`Wallet not found with id '${req.params.walletId}'`);}else{++cov_1wp9o5tx4q.b[9][1];}let projectedWallet=(++cov_1wp9o5tx4q.s[78],projectWallet(walletFound));++cov_1wp9o5tx4q.s[79];res.status(200).send(projectedWallet);});++cov_1wp9o5tx4q.s[80];this.app.post('/operator/wallets/:walletId/transactions',(req,res)=>{++cov_1wp9o5tx4q.f[15];let walletId=(++cov_1wp9o5tx4q.s[81],req.params.walletId);let password=(++cov_1wp9o5tx4q.s[82],req.headers.password);++cov_1wp9o5tx4q.s[83];if(password==null){++cov_1wp9o5tx4q.b[10][0];++cov_1wp9o5tx4q.s[84];throw new HTTPError(401,'Wallet\'s password is missing.');}else{++cov_1wp9o5tx4q.b[10][1];}let passwordHash=(++cov_1wp9o5tx4q.s[85],CryptoUtil.hash(password));++cov_1wp9o5tx4q.s[86];try{++cov_1wp9o5tx4q.s[87];if(!operator.checkWalletPassword(walletId,passwordHash)){++cov_1wp9o5tx4q.b[11][0];++cov_1wp9o5tx4q.s[88];throw new HTTPError(403,`Invalid password for wallet '${walletId}'`);}else{++cov_1wp9o5tx4q.b[11][1];}let newTransaction=(++cov_1wp9o5tx4q.s[89],operator.createTransaction(walletId,req.body.fromAddress,req.body.toAddress,req.body.amount,req.body.changeAddress));++cov_1wp9o5tx4q.s[90];newTransaction.check();let transactionCreated=(++cov_1wp9o5tx4q.s[91],blockchain.addTransaction(Transaction.fromJson(newTransaction)));++cov_1wp9o5tx4q.s[92];res.status(201).send(transactionCreated);}catch(ex){++cov_1wp9o5tx4q.s[93];if((++cov_1wp9o5tx4q.b[13][0],ex instanceof ArgumentError)||(++cov_1wp9o5tx4q.b[13][1],ex instanceof TransactionAssertionError)){++cov_1wp9o5tx4q.b[12][0];++cov_1wp9o5tx4q.s[94];throw new HTTPError(400,ex.message,walletId,ex);}else{++cov_1wp9o5tx4q.b[12][1];++cov_1wp9o5tx4q.s[95];throw ex;}}});++cov_1wp9o5tx4q.s[96];this.app.get('/operator/wallets/:walletId/addresses',(req,res)=>{++cov_1wp9o5tx4q.f[16];let walletId=(++cov_1wp9o5tx4q.s[97],req.params.walletId);++cov_1wp9o5tx4q.s[98];try{let addresses=(++cov_1wp9o5tx4q.s[99],operator.getAddressesForWallet(walletId));++cov_1wp9o5tx4q.s[100];res.status(200).send(addresses);}catch(ex){++cov_1wp9o5tx4q.s[101];if(ex instanceof ArgumentError){++cov_1wp9o5tx4q.b[14][0];++cov_1wp9o5tx4q.s[102];throw new HTTPError(400,ex.message,walletId,ex);}else{++cov_1wp9o5tx4q.b[14][1];++cov_1wp9o5tx4q.s[103];throw ex;}}});++cov_1wp9o5tx4q.s[104];this.app.post('/operator/wallets/:walletId/addresses',(req,res)=>{++cov_1wp9o5tx4q.f[17];let walletId=(++cov_1wp9o5tx4q.s[105],req.params.walletId);let password=(++cov_1wp9o5tx4q.s[106],req.headers.password);++cov_1wp9o5tx4q.s[107];if(password==null){++cov_1wp9o5tx4q.b[15][0];++cov_1wp9o5tx4q.s[108];throw new HTTPError(401,'Wallet\'s password is missing.');}else{++cov_1wp9o5tx4q.b[15][1];}let passwordHash=(++cov_1wp9o5tx4q.s[109],CryptoUtil.hash(password));++cov_1wp9o5tx4q.s[110];try{++cov_1wp9o5tx4q.s[111];if(!operator.checkWalletPassword(walletId,passwordHash)){++cov_1wp9o5tx4q.b[16][0];++cov_1wp9o5tx4q.s[112];throw new HTTPError(403,`Invalid password for wallet '${walletId}'`);}else{++cov_1wp9o5tx4q.b[16][1];}let newAddress=(++cov_1wp9o5tx4q.s[113],operator.generateAddressForWallet(walletId));++cov_1wp9o5tx4q.s[114];res.status(201).send({address:newAddress});}catch(ex){++cov_1wp9o5tx4q.s[115];if(ex instanceof ArgumentError){++cov_1wp9o5tx4q.b[17][0];++cov_1wp9o5tx4q.s[116];throw new HTTPError(400,ex.message,walletId,ex);}else{++cov_1wp9o5tx4q.b[17][1];++cov_1wp9o5tx4q.s[117];throw ex;}}});++cov_1wp9o5tx4q.s[118];this.app.get('/operator/wallets/:walletId/addresses/:addressId/balance',(req,res)=>{++cov_1wp9o5tx4q.f[18];let walletId=(++cov_1wp9o5tx4q.s[119],req.params.walletId);let addressId=(++cov_1wp9o5tx4q.s[120],req.params.addressId);++cov_1wp9o5tx4q.s[121];try{let balance=(++cov_1wp9o5tx4q.s[122],operator.getBalanceForWalletAddress(walletId,addressId));++cov_1wp9o5tx4q.s[123];res.status(200).send({balance:balance});}catch(ex){++cov_1wp9o5tx4q.s[124];if(ex instanceof ArgumentError){++cov_1wp9o5tx4q.b[18][0];++cov_1wp9o5tx4q.s[125];throw new HTTPError(400,ex.message,{walletId,addressId},ex);}else{++cov_1wp9o5tx4q.b[18][1];++cov_1wp9o5tx4q.s[126];throw ex;}}});++cov_1wp9o5tx4q.s[127];this.app.get('/node/peers',(req,res)=>{++cov_1wp9o5tx4q.f[19];++cov_1wp9o5tx4q.s[128];res.status(200).send(node.peers);});++cov_1wp9o5tx4q.s[129];this.app.post('/node/peers',(req,res)=>{++cov_1wp9o5tx4q.f[20];let newPeer=(++cov_1wp9o5tx4q.s[130],node.connectToPeer(req.body));++cov_1wp9o5tx4q.s[131];res.status(201).send(newPeer);});++cov_1wp9o5tx4q.s[132];this.app.get('/node/transactions/:transactionId([a-zA-Z0-9]{64})/confirmations',(req,res)=>{++cov_1wp9o5tx4q.f[21];++cov_1wp9o5tx4q.s[133];node.getConfirmations(req.params.transactionId).then(confirmations=>{++cov_1wp9o5tx4q.f[22];++cov_1wp9o5tx4q.s[134];res.status(200).send({confirmations:confirmations});});});++cov_1wp9o5tx4q.s[135];this.app.post('/miner/mine',(req,res,next)=>{++cov_1wp9o5tx4q.f[23];++cov_1wp9o5tx4q.s[136];miner.mine(req.body.rewardAddress).then(newBlock=>{++cov_1wp9o5tx4q.f[24];++cov_1wp9o5tx4q.s[137];newBlock=Block.fromJson(newBlock);++cov_1wp9o5tx4q.s[138];blockchain.addBlock(newBlock);++cov_1wp9o5tx4q.s[139];res.status(201).send(newBlock);}).catch(ex=>{++cov_1wp9o5tx4q.f[25];++cov_1wp9o5tx4q.s[140];if((++cov_1wp9o5tx4q.b[20][0],ex instanceof BlockAssertionError)&&(++cov_1wp9o5tx4q.b[20][1],ex.message.includes('Invalid index'))){++cov_1wp9o5tx4q.b[19][0];++cov_1wp9o5tx4q.s[141];next(new HTTPError(409,'A new block were added before we were able to mine one'),null,ex);}else{++cov_1wp9o5tx4q.b[19][1];++cov_1wp9o5tx4q.s[142];next(ex);}});});++cov_1wp9o5tx4q.s[143];this.app.use(function(err,req,res,next){++cov_1wp9o5tx4q.f[26];++cov_1wp9o5tx4q.s[144];// eslint-disable-line no-unused-vars
if(err instanceof HTTPError){++cov_1wp9o5tx4q.b[21][0];++cov_1wp9o5tx4q.s[145];res.status(err.status);}else{++cov_1wp9o5tx4q.b[21][1];++cov_1wp9o5tx4q.s[146];res.status(500);}++cov_1wp9o5tx4q.s[147];res.send(err.message+(err.cause?(++cov_1wp9o5tx4q.b[22][0],' - '+err.cause.message):(++cov_1wp9o5tx4q.b[22][1],'')));});}listen(host,port){++cov_1wp9o5tx4q.f[27];++cov_1wp9o5tx4q.s[148];return new Promise((resolve,reject)=>{++cov_1wp9o5tx4q.f[28];++cov_1wp9o5tx4q.s[149];this.server=this.app.listen(port,host,err=>{++cov_1wp9o5tx4q.f[29];++cov_1wp9o5tx4q.s[150];if(err){++cov_1wp9o5tx4q.b[23][0];++cov_1wp9o5tx4q.s[151];reject(err);}else{++cov_1wp9o5tx4q.b[23][1];}++cov_1wp9o5tx4q.s[152];console.info(`Listening http on port: ${this.server.address().port}, to access the API documentation go to http://${host}:${this.server.address().port}/api-docs/`);++cov_1wp9o5tx4q.s[153];resolve(this);});});}}++cov_1wp9o5tx4q.s[154];module.exports=HttpServer;